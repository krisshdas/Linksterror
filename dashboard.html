<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
  <title>LinksTerror â€” Dashboard</title>
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <div id="app" class="fade-in">
    <header class="topbar">
      <div class="brand">
        <img src="https://raw.githubusercontent.com/krisshdas/Linksterror/main/icon.png" alt="logo" class="logo" onerror="this.style.display='none'">
        <div class="title">LinksTerror</div>
      </div>

      <div class="right">
        <div id="welcome" class="welcome-anim">Welcome</div>

        <div id="profileWrap" class="profile-wrap invisible">
          <button id="profileBtn" class="profile-btn" aria-label="Profile">
            <img id="profileAvatar" class="avatar" src="" alt="avatar" />
            <span id="profileName" class="profile-name"></span>
            <span id="adminCrown" class="crown" title="Admin" style="display:none">ðŸ‘‘</span>
            <i class="chev">â–¾</i>
          </button>

          <div id="profileMenu" class="profile-menu hidden">
            <div class="pm-header">
              <img id="pm-avatar" class="pm-avatar" src="" alt="avatar">
              <div>
                <div id="pm-name" class="pm-name"></div>
                <div id="pm-email" class="pm-email"></div>
              </div>
            </div>

            <nav class="pm-nav">
              <button data-page="dashboard" class="pm-link active">Dashboard</button>
              <button data-page="ads" class="pm-link">Manage Ads</button>
              <button data-page="links" class="pm-link">Manage Links</button>
              <button data-page="analytics" class="pm-link">Analytics</button>
            </nav>

            <div class="pm-actions">
              <button id="logoutBtn" class="btn-ghost">Logout</button>
            </div>
          </div>
        </div>

        <button id="signInBtn" class="btn-primary">Sign in with Google</button>
      </div>
    </header>

    <main class="main">
      <!-- DASHBOARD PAGE -->
      <section id="page-dashboard" class="page active">
        <div class="panel create-panel">
          <h2>Create a Short Link</h2>
          <p class="muted">Paste a destination URL to create a short link that expires in 30 days.</p>

          <div class="form-row">
            <input id="longUrl" type="url" placeholder="https://example.com/some/path" autocomplete="off">
            <button id="shortenBtn" class="btn-primary">Shorten</button>
          </div>

          <div id="result" class="result hidden"></div>
        </div>

        <div class="panel stats-panel">
          <h3>Quick Stats</h3>
          <div class="stats-grid">
            <div class="stat card">
              <div class="stat-title">Total Links</div>
              <div id="statTotal" class="stat-value">â€”</div>
            </div>
            <div class="stat card">
              <div class="stat-title">Your Links</div>
              <div id="statMine" class="stat-value">â€”</div>
            </div>
            <div class="stat card">
              <div class="stat-title">Active Links</div>
              <div id="statActive" class="stat-value">â€”</div>
            </div>
          </div>

          <div class="chart-card">
            <h4>Created (last 7 days)</h4>
            <svg id="spark" class="spark" viewBox="0 0 140 40" preserveAspectRatio="none"></svg>
          </div>
        </div>

        <div class="panel list-panel">
          <h3>Your Recent Links</h3>
          <div id="linksList" class="links-list">Loading...</div>
        </div>
      </section>

      <!-- ADS PAGE (placeholder) -->
      <section id="page-ads" class="page">
        <div class="panel">
          <h2>Manage Ads</h2>
          <p class="muted">You can manage your own custom ad snippets (these are separate from the hardcoded ads in ad1.html).</p>
          <p class="muted tiny">(This area is a scaffold â€” ads management will create records under /ads/{uid}/...)</p>
          <div id="adsArea">Feature planned â€” quick scaffold present.</div>
        </div>
      </section>

      <!-- LINKS MANAGEMENT -->
      <section id="page-links" class="page">
        <div class="panel">
          <h2>All Links</h2>
          <p class="muted">Admins can view and edit all links. Regular users see their own links only.</p>
          <div id="allLinksList" class="links-list">Loading...</div>
        </div>
      </section>

      <!-- ANALYTICS -->
      <section id="page-analytics" class="page">
        <div class="panel">
          <h2>Analytics Prototype</h2>
          <p class="muted">Simple breakdown of links created recently.</p>
          <div class="analytics-grid">
            <div class="card big">
              <h4>Top Metrics</h4>
              <ul class="metrics">
                <li>Total links: <strong id="metricTotal">â€”</strong></li>
                <li>Links created (7d): <strong id="metric7d">â€”</strong></li>
                <li>Active links: <strong id="metricActive">â€”</strong></li>
              </ul>
            </div>
            <div class="card">
              <h4>Traffic (created / day)</h4>
              <svg id="barChart" viewBox="0 0 140 40" preserveAspectRatio="none" class="spark"></svg>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div>LinksTerror â€¢ Built with ðŸ”¥</div>
      <div class="muted tiny">Signed in via Google â€” admins: dask20080@gmail.com, daskris20080@gmail.com</div>
    </footer>
  </div>

  <script type="module" src="dashboard.js"></script>
</body>
</html>
